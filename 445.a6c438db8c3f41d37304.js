"use strict";(self.webpackChunkcats_pinterest=self.webpackChunkcats_pinterest||[]).push([[445],{311:(e,t,n)=>{n.d(t,{Y:()=>i});var a=n(848),c=n(753),r=function(e){var t=e.to,n=e.children;return(0,a.jsx)(c.k2,{to:t,className:function(e){var t=e.isActive;return"".concat("EoJugVt4"," ").concat(t?"ck6UsV3m":"")},children:n})},o=function(){return(0,a.jsxs)("nav",{className:"Yq2gB_mH",children:[(0,a.jsx)(r,{to:"/",children:"Все котики"}),(0,a.jsx)(r,{to:"/likes",children:"Любимые котики"})]})},i=function(){return(0,a.jsx)("header",{className:"ti_pppXr",children:(0,a.jsx)(o,{})})}},445:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(848),c=n(540),r=n(356),o=n(83).A.create({baseURL:"https://api.thecatapi.com/v1/images/",headers:{"Content-Type":"application/json","x-api-key":"live_0EqFHUl2lsWee6gEzcZRVaqdH9I4e7DH9XldIcwKChfYVnZe976jK9PowB9C5lDC"}}),i="ASC",s=16,l={getCatList:function(e){return t=this,n=arguments,c=function(e){var t=e.page,n=e.limit,a=void 0===n?s:n,c=e.order,r=void 0===c?i:c;return function(e,t){var n,a,c,r={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(r=0)),r;)try{if(n=1,a&&(c=2&i[0]?a.return:i[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,i[1])).done)return c;switch(a=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!((c=(c=r.trys).length>0&&c[c.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){r.label=i[1];break}if(6===i[0]&&r.label<c[1]){r.label=c[1],c=i;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(i);break}c[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return[4,o.get("search",{params:{limit:a,page:t,order:r}})];case 1:return[2,e.sent().data]}}))},new((a=void 0)||(a=Promise))((function(e,r){function o(e){try{s(c.next(e))}catch(e){r(e)}}function i(e){try{s(c.throw(e))}catch(e){r(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,i)}s((c=c.apply(t,n||[])).next())}));var t,n,a,c}},u=n(355),f=n(857),d="Ou9T6Eyh",h=function(e){var t=e.isLiked,n=e.onClick,c=e.className;return(0,a.jsx)("button",{className:"".concat("A0S1RtfW"," ").concat(c||""),onClick:function(e){e.stopPropagation(),n()},"aria-label":"like",children:t?(0,a.jsx)(f.A,{className:d}):(0,a.jsx)(u.A,{className:d})})},p=function(e){var t=e.cat,n=e.onLike,r=(0,c.useState)(!1),o=r[0],i=r[1];return(0,a.jsxs)("li",{className:"uLaWd345",children:[(0,a.jsx)("img",{src:t.url,alt:"Cat",className:"lnEz3BSb",loading:"lazy"}),(0,a.jsx)(h,{isLiked:o,onClick:function(){i(!o),null==n||n(t.id)},className:"ZWi2iOdK"})]})},m=function(e){var t=e.cats,n=e.onLike,c=e.className;return(0,a.jsx)("ul",{className:"".concat("Uts068ve"," ").concat(c||""),children:t.map((function(e){return(0,a.jsx)(p,{cat:e,onLike:n},e.id)}))})},v=n(311),g=function(e){var t=e.message,n=e.className;return(0,a.jsx)("div",{className:"".concat("fua8UCGt"," ").concat(n||""),children:(0,a.jsx)("span",{className:"lxg2ah60",children:t})})},x=function(e,t,n){if(n||2===arguments.length)for(var a,c=0,r=t.length;c<r;c++)!a&&c in t||(a||(a=Array.prototype.slice.call(t,0,c)),a[c]=t[c]);return e.concat(a||Array.prototype.slice.call(t))};const b=function(){var e=(0,c.useState)([]),t=e[0],n=e[1],o=(0,c.useState)(0),i=o[0],s=o[1],u=(0,c.useState)(!1),f=u[0],d=u[1],h=(0,c.useState)(null),p=h[0],b=h[1],j=(0,c.useCallback)((function(){f||(d(!0),b(null),l.getCatList({page:i+1}).then((function(e){n((function(t){return x(x([],t,!0),e,!0)})),s((function(e){return e+1}))})).catch((function(e){b(e instanceof Error?e:new Error("Ошибка загрузки котиков"))})).finally((function(){d(!1)})))}),[i,f]);return(0,c.useEffect)((function(){l.getCatList({page:0}).then((function(e){n(e)})).catch((function(e){b(e instanceof Error?e:new Error("Failed to fetch cats"))}))}),[]),function(e){var t=e.callback,n=e.isLoading;(0,c.useEffect)((function(){var e=function(){var e=document.documentElement.scrollHeight,a=document.documentElement.scrollTop,c=document.documentElement.clientHeight;!n&&e-a<=c+100&&t()};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[t,n])}({callback:j,isLoading:f}),p?(0,a.jsx)(g,{message:null==p?void 0:p.message}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Y,{}),(0,a.jsx)(m,{cats:t}),f&&(0,a.jsx)(r.a,{})]})}}}]);